!function(t){var r=function(t){return t.replace(/\D+/g,"")},e=function(t){return t.replace(/[^a-z]/gi,"")};t.money={formatterFunction:function(t){return t=t.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),t="$"+t},patternCharacters:"$,",allowNull:!1,preformatter:function(t){return t.replace(/[^0-9.]/g,"")}},t.state={formatterFunction:function(t){return t.toUpperCase()},lengthLimit:2,preforatter:e},t.date={formatterFunction:function(t,r){for(var e="",n=0;n<t.length;n++)2!=n&&4!=n||(e+="/",r.inc(n)),e+=t.charAt(n);return e},patternCharacters:"/",lengthLimit:10,preformatter:r},t.zip={lengthLimit:5,preformatter:e},t.ssn={formatterFunction:function(t){for(var r="",e=0;e<t.length;e++)4!=e&&6!=e||(r+="-"),r+=t.charAt(e);return r},patternCharacters:"-",lengthLimit:12,preformatter:r},t.phone={formatterFunction:function(t){for(var r="",e=0;e<t.length;e++)0==e?r+="(":3==e?r+=")":6==e&&(r+="-"),r+=t.charAt(e);return r},patternCharacters:"() -",lengthLimit:13,preformatter:r},t.phoneNoAreaCode={formatterFunction:function(t){for(var r="",e=0;e<t.length;e++)3==e&&(r+="-"),r+=t.charAt(e);return r},patternCharacters:"-",lengthLimit:8,preformatter:r},t.numbers={preformatter:r},t.characters={preformatter:e},t.capitalize={formatterFunction:function(t){return t=t.replace(/\b(\w)/g,function(t){return t.toUpperCase()})}},t.creditCardNumber={formatterFunction:function(t){for(var r="",e=0;e<t.length;e++)4!=e&&8!=e&&12!=e&&16!=e||(r+=" "),r+=t.charAt(e);return r},patternCharacters:" ",lengthLimit:19,preformatter:r},t.creditCardCVC={preformatter:r,lengthLimit:3},t.creditCardDate={formatterFunction:function(t){for(var r="",e=0;e<t.length;e++)3==e&&(r+="/"),r+=t.charAt(e)},patternCharacters:"/",lengthLimit:5,preformatter:r},t.bankRoutingNumber={preformatter:r,lengthLimit:9},t.bankAccountNumber={preformatter:r,lengthLimit:17},t.oneWord={formatterFunction:function(t){return t=t.match(/(.)[^ ]*/),t?t[0]:""}}}(this.Formatter=this.Formatter||{}),ko.bindingHandlers.formatter={init:function(t,r,e,n,a){var o,i=e();i.textInput?o=i.textInput:i.value&&(o=i.value);var c=r(),u=function(){ko.bindingHandlers.formatter.format(t,o,c)};o.subscribe(u),u()},format:function(t,r,e){function n(t,r){if(e.patternCharacters){var n=new RegExp("["+e.patternCharacters+"]","gi"),a=t.substring(0,r).match(n);return a?a.length:0}return 0}var a=ko.unwrap(r),o=t.selectionStart;if(function(t){return!!t}(a)||e.allowNull){a.length>e.lengthLimit&&(a=a.substring(0,e.lengthLimit));var i=n(a,o);if(null!=e.preformatter&&(a=e.preformatter(a)),e.formatterFunction){a=e.formatterFunction(a);o+=n(a,o)-i}}r(a),function(t,r){if(t.setSelectionRange)t.focus(),t.setSelectionRange(r,r);else if(t.createTextRange){var e=t.createTextRange();e.collapse(!0),e.moveEnd("character",r),e.moveStart("character",r),e.select()}}(t,o)}};